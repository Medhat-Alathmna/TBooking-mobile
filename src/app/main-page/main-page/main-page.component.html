<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button color="primary"(click)="addAppominet()" translate>Send</ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-back-button default-href="#"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content color="light" [fullscreen]="true">

  <ion-grid>
    <form #form="ngForm" body class="px-5 ">

      <ion-row>
        <ion-label style="font-size: 1.5rem;padding-bottom: 1rem" translate>Customer Deatils</ion-label>

        <ion-input mode="md" required="true" style="margin-bottom: 5px" fill="outline" name="firstName"
          [label]="'First Name'|translate" [(ngModel)]="appointment.firstName" [placeholder]="'First Name'|translate"
          type="text" labelPlacement="stacked"></ion-input>

        <ion-input mode="md" required="true" style="margin-bottom: 5px" fill="outline" name="middleName"
          [label]="'Middle Name'|translate" [(ngModel)]="appointment.middleName" type="text"
          [placeholder]="'Middle Name'|translate" labelPlacement="stacked"></ion-input>

        <ion-input mode="md" required="true" style="margin-bottom: 5px" fill="outline" name="lastName"
          [label]="'Last Name'|translate" [(ngModel)]="appointment.lastName" [placeholder]="'Last Name'|translate"
          type="text" labelPlacement="stacked"></ion-input>

        <ion-input mode="md" required="true" style="margin-bottom: 5px" inputmode="tel" [maxlength]="15" fill="outline"
          name="phone" [label]="'WhatsApp No.'|translate" [(ngModel)]="appointment.phone" placeholder="962-999-999-999" type="tel"
          labelPlacement="stacked"></ion-input>

        <ion-input mode="md" fill="outline" [label]="'Address'|translate" name="address"
          [(ngModel)]="appointment.address" placeholder="Amman" type="text" labelPlacement="stacked"></ion-input>

      </ion-row>
    </form>

    <ion-row>
      <ion-label style="font-size: 1.5rem;padding-bottom: 1rem" translate>Appointment Details</ion-label>
      <ion-card style="width: -webkit-fill-available;" id="open-modal2">
        <ion-row style="justify-content: center;">
          <div style="padding: 15px;">
            <!-- <ion-icon style="font-size: large;" name="time-outline"></ion-icon> -->
            <ion-label style="font-size: large;" translate>Select Appointment Time</ion-label>
          </div>
        </ion-row>
        <ion-row>
          <ion-col style="justify-content: center;display: flex;">
            <div style="padding: 15px;">
              <ion-icon name="calendar-outline"></ion-icon>
              <ion-label color="primary" style="padding-left: 5px;">{{appointment.fromDate |
                date:'YYYY-MM-dd'}}</ion-label>
            </div>
          </ion-col>
          <ion-col style="justify-content: center;display: flex;">
            <div style="padding: 15px;">
              <ion-icon name="alarm-outline"></ion-icon>
              <ion-label color="primary" style="padding-left: 5px;">{{appointment.fromDate | date:'hh:mm a'}}</ion-label>
            </div>
          </ion-col>
        </ion-row>
      </ion-card>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-list>
          <ion-select [(ngModel)]="appointment.employee" [label]="'Employee'|translate"
            [placeholder]="'Select Available Employee'|translate">
            <ion-select-option *ngFor="let user of users" [value]="user">{{user.username}}</ion-select-option>
          </ion-select>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="selectServices.length" style="justify-content: space-between;padding-inline: 0.5rem">
      <ion-label style="font-size: 1.5rem;" translate>Services</ion-label>
      <ion-label style="display: flex;align-items: center;" translate>{{'Total'|translate}}:
        {{getTotalPrice().serviceAmount}} {{getCurrencySymbol(cur.code)}}</ion-label>
    </ion-row>
    <ion-row *ngFor="let service of selectServices let i=index">
      <ion-card style="margin-left: 0;margin-right: 0;width: -webkit-fill-available;">
        <ion-item-sliding>
          <ion-item line="none" style="width: 100%;">

            <ion-card-header style="flex-direction: row;justify-content: space-between;width: 100%;">
              <ion-card-title style="width: 70%">{{lang==='ar'?service.ar:service.en}}</ion-card-title>
              <ion-text style="align-self: center;">{{'Price'|translate}}: {{service.price}}
                {{getCurrencySymbol(cur.code)}}</ion-text>
            </ion-card-header>
          </ion-item>
          <ion-item-options side="end">

            <ion-item-option (click)="removeServices(i)" color="danger">
              <ion-icon slot="icon-only" name="trash"></ion-icon>
              {{'Delete'|translate}}
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-card>
    </ion-row>
    <ion-row style="flex-wrap: nowrap;" *ngIf="appointment.employee.id">
      <ion-button (click)="openServices()" expand="block" style="width: -webkit-fill-available;">
        <ion-label style="padding-left: 5px;" translate>Select Services</ion-label>
      </ion-button>
    </ion-row>
    <!-- <ion-row>
      <ion-item lines="none" style="width: 100%;" >
        <ion-textarea style="width: 100%;" fill="outline" mode="md" [placeholder]="'First Name'|translate"  rows="2"></ion-textarea>

      </ion-item>
    </ion-row> -->
  </ion-grid>
</ion-content>



<ion-modal #openmodal2 trigger="open-modal2">
  <ng-template>
    <ion-content force-overscroll="false">
      <ion-datetime #dateTime>
      </ion-datetime>
      <ion-toolbar>
        <ion-buttons style="justify-content: space-between !important;">
          <ion-button color="danger" (click)="dismissModal()" translate> Cancel</ion-button>
          <ion-button (click)="selectDate(dateTime.value)" translate> Done</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-content>
  </ng-template>
</ion-modal>